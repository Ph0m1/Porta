server {
    listen 80;
    server_name localhost;

    location / {
        root /usr/share/nginx/html;
        index index.html index.htm;
        try_files $uri $uri/ =404;
    }

    location /users {
        add_header Content-Type application/json;
        return 200 '{"users": [{"id": 1, "name": "John Doe", "email": "john@example.com"}, {"id": 2, "name": "Jane Smith", "email": "jane@example.com"}], "service": "backend-1"}';
    }

    location /posts {
        add_header Content-Type application/json;
        return 200 '{"posts": [{"id": 1, "title": "Hello World", "content": "This is a test post"}, {"id": 2, "title": "Another Post", "content": "More content here"}], "service": "backend-1"}';
    }

    location /__health {
        add_header Content-Type application/json;
        return 200 '{"status": "healthy", "service": "backend-1", "timestamp": "$time_iso8601"}';
    }

    location /metrics {
        add_header Content-Type text/plain;
        return 200 '# HELP backend_requests_total Total number of requests
# TYPE backend_requests_total counter
backend_requests_total{service="backend-1"} 42
';
    }

    error_page 500 502 503 504 /50x.html;
    location = /50x.html {
        root /usr/share/nginx/html;
    }
} 